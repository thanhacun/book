div(ng-include='"components/navbar/navbar.html"')

header.greeting
  .container.text-center
    h1 Book Jump
    p.lead A book trading club fetching data from Google Books API
    //span.fa-stack.fa-lg
      span.fa.fa-heart-o.fa-stack-3x
      span.fa.fa-book.fa-stack-2x
    span.fa.fa-3x.fa-book

.loading.text-center(ng-show='dataLoading'): span.fa.fa-3x.fa-spin.fa-spinner.text-danger

.container
  .row
    h1.page-header.text-center Features
    ul
      li.col-sm-4.col-sm-offset-1.text-success(ng-repeat='feature in features')
        span.fa-li.fa.fa-check-square
        | {{feature}}
  .row
    .col-lg-12.text-center
      h1.page-header(ng-hide='showAllBook') My books (and asking ones)
      h1.page-header(ng-show='showAllBook') All users books ({{books.length}} volumes)

    .col-sm-12.col-md-6.col-md-offset-3
      form.form-group(name='bookForm')
        .input-group
          .input-group-btn
            button.btn.btn-success(ng-click='allBookToggle()')
              span(ng-hide='showAllBook'): span.fa.fa-toggle-off
              span(ng-show='showAllBook'): span.fa.fa-toggle-on
          .input-group-addon(ng-hide='showAllBook')
            span.text-success All books
          input.form-control(type='text', ng-model='newBook.title', placeholder='Enter book title to add to database')
          .input-group-btn
            button.btn.btn-success(type='button', ng-click='modifyBook.newBook(newBook.title)', ng-disabled='!newBook.title'): span.fa.fa-plus-square

    .col-sm-12
      .media-list.list-group.col-md-6.col-sm-12.clearfix(ng-repeat='book in books')
        .media.list-group-item(ng-class='{"asking-book": book.status.asking, "asked-book": book.status.asked}', ng-show='showAllBook || book.status.owned || book.status.asking')
          .media-left
            a(href='{{book.vol_url}}')
              img.media-object.img-rounded(ng-src='{{book.cover_url}}')
          .media-body
            span.badge.alert-success.pull-right
              | {{'Owners: ' + book.users.length + ' '}}
              button.badge.alert-danger(ng-click='modifyBook.deleteBook(book._id)', ng-show='book.status.owned || currentUser.email === "admin@admin.com"', data-toggle='tooltip', title='Delete the book') Delete?
            h4.media-heading.text-danger {{book.name}}
            //First 50 words
            p.clearfix {{book.des.split(' ').slice(0, 50).join(' ') + " ..."}}
          span.badge.alert-info
            | {{'Asks: ' + book.trades.length + ' ' }}
            button.badge.alert-danger(ng-click='modifyBook.exchangeBook(book)', ng-show='book.status.asked', data-toggle='tooltip', title='Exchange the book') Give it?
            button.badge.alert-warning(ng-click='modifyBook.askBook(book)', ng-show='book.status.askable', data-toggle='tooltip', title='Ask for the book') Want it?
            span.badge.alert-warning(ng-show='book.status.asking') Be patient
          span.badge.alert-warning(ng-hide='book.status.asking || book.status.askable || book.status.owned') Not Available


          //span.badge.alert-info(ng-show='book.status.asked') Give it?

.container.text-center
  div(ng-include='"components/footer/footer.html"')
